% KansasLava-AK.tex
\begin{hcarentry}[updated]{Kansas Lava}
\label{klava}
\report{Andy Gill}%11/12
\participants{Andy Gill, Bowe Neuenschwander}
\status{ongoing}
\makeheader

Kansas Lava is a Domain Specific Language (DSL) for expressing
hardware descriptions of computations, and is hosted inside the
language Haskell. Kansas Lava programs are descriptions of specific hardware
entities, the connections between them, and other computational abstractions
that can compile down to these entities. Large circuits have been successfully
expressed using Kansas Lava, and Haskell's powerful abstraction mechanisms, as
well as generic generative techniques, can be applied to good effect to provide
descriptions of highly efficient circuits.

\begin{itemize}

\item The Fabric monad is now a Monad transformer.
The Fabric monad historically provided access to named input/output ports,
and now also provides named variables, implemented by ports that loop back on
themselves. This additional primitive capability allows for a {\em typed\/}
state machine monad.
This design gives an elegant stratospheric pattern: purely functional circuits using streams;
a monad for layout over {\em space\/}; and a monad for state generation,
that acts over {\em time\/}.

\item 
On top of Kansas Lava, we are developing Kansas Lava Cores.
In hardware, a core is a component
that can be realized as a circuit, typically on an FPGA. Kansas Lava Cores
contains about a dozen cores, and basic board support for Spartan3e,
as well as a high-fidelity emulator for the Spartan3e. The
cores and the simulator has been rewritten to use the new Fabric
and new state-machine generation monad.

\item Using various components provided as Kansas Lava Cores, 
we continue developing the $\lambda$-bridge 
with implementations (in Haskell and
Kansas Lava) of a simple protocol stack for communicating with FPGAs.
This bridge is based on the best-effort, unreliable,
but acknowledgment-centric access to an 8-bit WISHBONE-compliant hardware bus,
and idempotent transaction requests.

\item Finally, with Iavor Diatchki (Galois), we have reworked
our {\tt sized-types\/} library to use the new kind {\tt Nat} provided
in GHC 7.6.
\end{itemize}

\FurtherReading
  \url{http://www.ittc.ku.edu/csdl/fpg/Tools/KansasLava}
\end{hcarentry}
